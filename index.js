!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("mobx"),require("fbjs/lib/shallowEqual"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","mobx","fbjs/lib/shallowEqual","react-dom"],t):t(e["k-mobx-react"]={},e.React,e.mobx,e.shallowEqual,e.reactDom)}(this,function(e,t,n,r,o){"use strict";function i(e){function t(t,r,o,i,a,s){for(var c=arguments.length,u=Array(c>6?c-6:0),p=6;p<c;p++)u[p-6]=arguments[p];return n.untracked(function(){if(i=i||"<<anonymous>>",s=s||o,null==r[o]){if(t){var n=null===r[o]?"null":"undefined";return new Error("The "+a+" `"+s+"` is marked as required in `"+i+"`, but its value is `"+n+"`.")}return null}return e.apply(void 0,[r,o,i,a,s].concat(u))})}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}function a(e){var t=void 0===e?"undefined":g(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function s(e,t){return i(function(r,o,i,s,c){return n.untracked(function(){if(e&&a(r[o])===t.toLowerCase())return null;var s=void 0;switch(t){case"Array":s=n.isObservableArray;break;case"Object":s=n.isObservableObject;break;case"Map":s=n.isObservableMap;break;default:throw new Error("Unexpected mobxType: "+t)}var u=r[o];if(!s(u)){var p=function(e){var t=a(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}(u),l=e?" or javascript `"+t.toLowerCase()+"`":"";return new Error("Invalid prop `"+c+"` of type `"+p+"` supplied to `"+i+"`, expected `mobx.Observable"+t+"`"+l+".")}return null})})}function c(e,t){return i(function(r,o,i,a,c){for(var u=arguments.length,p=Array(u>5?u-5:0),l=5;l<u;l++)p[l-5]=arguments[l];return n.untracked(function(){if("function"!=typeof t)return new Error("Property `"+c+"` of component `"+i+"` has invalid PropType notation.");var n=s(e,"Array")(r,o,i);if(n instanceof Error)return n;for(var u=r[o],l=0;l<u.length;l++)if((n=t.apply(void 0,[u,l,i,a,c+"["+l+"]"].concat(p)))instanceof Error)return n;return null})})}function u(e,n,r){var o,i,a="inject-"+(n.displayName||n.name||n.constructor&&n.constructor.name||"Unknown");r&&(a+="-with-"+r);var s=(i=o=function(r){function o(){var e,t,n,r;_(this,o);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=n=S(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(a))),n.storeRef=function(e){n.wrappedInstance=e},r=t,S(n,r)}return P(o,r),x(o,[{key:"render",value:function(){var r={};for(var o in this.props)this.props.hasOwnProperty(o)&&(r[o]=this.props[o]);var i=e(this.context.mobxStores||{},r,this.context)||{};for(var a in i)r[a]=i[a];return function(e){return!(e.prototype&&e.prototype.render)}(n)||(r.ref=this.storeRef),t.createElement(n,r)}}]),o}(t.Component),o.displayName=a,i);return I(s,n),s.wrappedComponent=n,Object.defineProperties(s,G),s}function p(){var e=void 0;if("function"==typeof arguments[0])return e=arguments[0],function(t){var n=u(e,t);return n.isMobxInjector=!1,n=y(n),n.isMobxInjector=!0,n};for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e=function(e){return function(t,n){return e.forEach(function(e){if(!(e in n)){if(!(e in t))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");n[e]=t[e]}}),n}}(t),function(n){return u(e,n,t.join("-"))}}function l(e){if(o.findDOMNode)try{return o.findDOMNode(e)}catch(e){return null}return null}function f(e){var t=l(e);t&&z&&z.set(t,e),J.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:t})}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e[t],o=F[t],i=r?!0===n?function(){o.apply(this,arguments),r.apply(this,arguments)}:function(){r.apply(this,arguments),o.apply(this,arguments)}:o;e[t]=i}function b(e,t){if(null==e||null==t||"object"!==(void 0===e?"undefined":g(e))||"object"!==(void 0===t?"undefined":g(t)))return e!==t;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(var r=void 0,o=n.length-1;r=n[o];o--)if(t[r]!==e[r])return!0;return!1}function y(e,n){if("string"==typeof e)throw new Error("Store names should be provided as array");if(Array.isArray(e))return V||(V=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),n?p.apply(null,e)(y(n)):function(t){return y(e,t)};var r=e;if(!0===r.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),!("function"!=typeof r||r.prototype&&r.prototype.render||r.isReactClass||t.Component.isPrototypeOf(r))){var o,i;return y((i=o=function(e){function t(){return _(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,e),x(t,[{key:"render",value:function(){return r.call(this,this.props,this.context)}}]),t}(t.Component),o.displayName=r.displayName||r.name,o.contextTypes=r.contextTypes,o.propTypes=r.propTypes,o.defaultProps=r.defaultProps,i))}if(!r)throw new Error("Please pass a valid component to 'observer'");return function(e){d(e,"componentWillMount",!0),["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(t){d(e,t)}),e.shouldComponentUpdate||(e.shouldComponentUpdate=F.shouldComponentUpdate)}(r.prototype||r),r.isMobXReactObserver=!0,r}var h="default"in t?t.default:t;r=r&&r.hasOwnProperty("default")?r.default:r;var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},g="function"==typeof Symbol&&"symbol"===v(Symbol.iterator)?function(e){return void 0===e?"undefined":v(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":v(e)},_=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),P=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":v(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},S=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":v(t))&&"function"!=typeof t?e:t},C=function(){function e(){_(this,e),this.listeners=[]}return x(e,[{key:"on",value:function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1)}}},{key:"emit",value:function(e){this.listeners.forEach(function(t){return t(e)})}}]),e}(),E={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},k={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},M=Object.defineProperty,T=Object.getOwnPropertyNames,R=Object.getOwnPropertySymbols,A=Object.getOwnPropertyDescriptor,U=Object.getPrototypeOf,D=U&&U(Object),I=function e(t,n,r){if("string"!=typeof n){if(D){var o=U(n);o&&o!==D&&e(t,o,r)}var i=T(n);R&&(i=i.concat(R(n)));for(var a=0;a<i.length;++a){var s=i[a];if(!(E[s]||k[s]||r&&r[s])){var c=A(n,s);try{M(t,s,c)}catch(e){}}}return t}return t},N=s(!1,"Array"),W=c.bind(null,!1),q=s(!1,"Map"),L=s(!1,"Object"),$=s(!0,"Array"),B=c.bind(null,!0),X=s(!0,"Object"),H=(Object.freeze({observableArray:N,observableArrayOf:W,observableMap:q,observableObject:L,arrayOrObservableArray:$,arrayOrObservableArrayOf:B,objectOrObservableObject:X}),{mobxStores:X});Object.seal(H);var G={contextTypes:{get:function(){return H},set:function(e){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}},K=!1,V=!1,z="undefined"!=typeof WeakMap?new WeakMap:void 0,J=new C,Y=new C,F={componentWillMount:function(){function e(e){var t=this[e],r=new n.Atom("reactive "+e);Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:function(){return r.reportObserved(),t},set:function(e){!s&&b(t,e)?(t=e,a=!0,r.reportChanged(),a=!1):t=e}})}var r=this;var o=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",i=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID,a=!1,s=!1;e.call(this,"props"),e.call(this,"state");var c=this.render.bind(this),u=null,p=!1,l=function(){p=!1;var e=void 0,t=void 0;if(u.track(function(){K&&(r.__$mobRenderStart=Date.now());try{t=n.extras.allowStateChanges(!1,c)}catch(t){e=t}K&&(r.__$mobRenderEnd=Date.now())}),e)throw Y.emit(e),e;return t};this.render=function(){return u=new n.Reaction(o+"#"+i+".render()",function(){if(!p&&(p=!0,"function"==typeof r.componentWillReact&&r.componentWillReact(),!0!==r.__$mobxIsUnmounted)){var e=!0;try{s=!0,a||t.Component.prototype.forceUpdate.call(r),e=!1}finally{s=!1,e&&u.dispose()}}}),u.reactComponent=r,l.$mobx=u,r.render=l,l()}},componentWillUnmount:function(){if(this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0,K){var e=l(this);e&&z&&z.delete(e),J.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){K&&f(this)},componentDidUpdate:function(){K&&f(this)},shouldComponentUpdate:function(e,t){return this.state!==t||b(this.props,e)}},Q=y(function(e){return(0,e.children)()});Q.displayName="Observer",Q.propTypes={children:function(e,t,n,r,o){if("function"!=typeof e[t])return new Error("Invalid prop `"+o+"` of type `"+g(e[t])+"` supplied to `"+n+"`, expected `function`.")}};var Z,ee,te={children:!0,key:!0,ref:!0},ne=(ee=Z=function(e){function n(){return _(this,n),S(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return P(n,e),x(n,[{key:"render",value:function(){return t.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var e={},t=this.context.mobxStores;if(t)for(var n in t)e[n]=t[n];for(var r in this.props)te[r]||"suppressChangedStoreWarning"===r||(e[r]=this.props[r]);return{mobxStores:e}}},{key:"componentWillReceiveProps",value:function(e){if(Object.keys(e).length!==Object.keys(this.props).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!e.suppressChangedStoreWarning)for(var t in e)te[t]||this.props[t]===e[t]||console.warn("MobX Provider: Provided store '"+t+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}]),n}(t.Component),Z.contextTypes={mobxStores:X},Z.childContextTypes={mobxStores:X.isRequired},ee);if(!t.Component)throw new Error("mobx-react requires React to be available");if(!n.extras)throw new Error("mobx-react requires mobx to be available");if("function"==typeof o.unstable_batchedUpdates&&n.extras.setReactionScheduler(o.unstable_batchedUpdates),"object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":g(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var re={spy:n.spy,extras:n.extras},oe={renderReporter:J,componentByNodeRegistery:z,trackComponents:function(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");K||(K=!0)}};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(oe,re)}e.Provider=ne,e.inject=function(e){return function(t){var o,i;return i=o=function(o){function i(t,o){m(this,i);var a=j(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,o));a.state={injectedProps:{}};var s=!0;return a.dispose=n.autorun(function(){var t=e(a.context.mobxStores),o=w({},t);Object.keys(o).forEach(function(e){var t=o[e];n.isObservable(t)&&(o[e]=n.toJS(o[e]))}),s?(s=!1,a.state=w({},a.state,{injectedProps:o})):r(o,a.state.injectedProps)||a.setState(function(e){return w({},e,{injectedProps:o})})}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,h.Component),O(i,[{key:"componentWillUnmount",value:function(){this.dispose()}},{key:"render",value:function(){return h.createElement(t,w({},this.props,this.state.injectedProps))}}]),i}(),o.contextTypes={mobxStores:function(){return null}},i}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
